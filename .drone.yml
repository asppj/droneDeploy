kind: pipeline
type: docker # exec, ssh ,kubernetes
name: default

platform:
  arch: amd64

steps:
  - name: build
    image: golang
    volumes:
      - name: deps
        path: /go
    commands:
      - go env
      - go version
      - make build
      - ls 
      - bin/runner -v

  - name: ssh commands
    image: appleboy/drone-ssh
    settings:
      host:
        -  www.asppj.top
      port: 22
      key: 
        from_secret: private_ssh
      script:
        - echo hello
        - echo world
        - uname -a
        - pwd
        - ls

  - name: scp files
    image: appleboy/drone-scp
    settings:
      host: 
        - 39.100.86.233
      user: root
      port: 22
      password: 
        from_secret: ali_password
      target: /root/deploy-prometheus/prometheus
      source: bin/runner
